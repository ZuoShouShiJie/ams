-- --------------------------
-- 账务表
-- --------------------------
CREATE TABLE ams_accounting_config (
 `id` BIGINT NOT NULL AUTO_INCREMENT,
 `merchant_id` BIGINT NOT NULL COMMENT '商户编号',
 `product_id` BIGINT NOT NULL COMMENT '产品编号',
 `repay_plan` VARCHAR(1) COMMENT '还款计划 （0：不生成，1：生成）',
 `platform_plan` VARCHAR(1) COMMENT '撮合平台收益计划（0：不生成，1：生成）',
 `receipt_plan` VARCHAR(1) COMMENT '资方收款计划（0：不生成，1：生成）',
 `receipt_plan_n` VARCHAR(1) DEFAULT '0' COMMENT '是否1：n收款计划（0：1对1，例如资方是银行资产；1： 1对n，例如网贷资产对于多投资人）',
 `status` VARCHAR(1) COMMENT '状态(0:不生效，1：生效)',
 `creater` VARCHAR(18) COMMENT '创建人',
 `modifier` VARCHAR(18) COMMENT '修改人',
 `create_time` DATETIME NOT NULL COMMENT '创建时间',
 `modify_time` DATETIME COMMENT '修改时间',
 PRIMARY KEY (`id`),
 UNIQUE KEY ams_accounting_config_index_01 (`merchant_id`, `product_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='账务配置表';

CREATE TABLE `ams_accounting_00` (
 `id` VARCHAR(32) NOT NULL,
 `account_id` VARCHAR(18) COMMENT '借款人账号',
 `user_name` VARCHAR(5) COMMENT '借款人姓名',
 `cert_type` VARCHAR(2) COMMENT '证件类型',
 `cert_no` VARCHAR(32) COMMENT '证件号',
 `mobile` VARCHAR(20) COMMENT '手机号',
 `bo_id` BIGINT  COMMENT '借款编号',
 `merchant_id` BIGINT COMMENT '商户编码',
 `product_id` BIGINT  COMMENT '产品编号',
 `product_type` VARCHAR(2) COMMENT '产品类型',
 `contract_no` VARCHAR(100) COMMENT '合同编号（借据编号）list(可以单个合同，也支持多合同)',
 `contract_type` VARCHAR(2) COMMENT '合同类型（1：单合同/单借据，2：多合同/多借据）',
 `loan_amount` BIGINT  COMMENT '借款金额',
 `contract_amount` BIGINT  COMMENT '合同金额',
 `lend_amount` BIGINT  COMMENT '实际放款金额',
 `capital_amount` BIGINT  COMMENT '本金金额',
 `account_amount` BIGINT  COMMENT '建账金额',
 `repay_rate` VARCHAR(5) COMMENT '原始还款利率',
 `repay_floating_rate` VARCHAR(5) COMMENT '上浮比率（-20% — +20%）',
 `rate_type` VARCHAR(2) COMMENT '利率类型',
 `platform_rate` VARCHAR(2) COMMENT '平台收益率（if channel=1,通过撮合平台需要计算平台收益）',
 `is_full_fee` VARCHAR(2) COMMENT '是否一次性收取平台费（if channel=1）',
 `receipt_rate` VARCHAR(5) COMMENT '收款利率',
 `capital_advance` BIGINT  COMMENT '预收本金',
 `interest_advance` BIGINT  COMMENT '预收利息',
 `repay_account_no` VARCHAR(32) COMMENT '还款绑定账号',
 `repay_account_name` VARCHAR(5) COMMENT '还款账号开户名',
 `repay_acct_bank` VARCHAR(50) COMMENT '还款账号开户行',
 `repay_acct_mobile` VARCHAR(20) COMMENT '还款账号预留手机号',
 `approve_date` DATETIME COMMENT '审批日期',
 `approve_time` DATETIME COMMENT '审批时间',
 `lend_date` DATETIME COMMENT '实际放款日期',
 `lend_time` DATETIME COMMENT '实际放款时间',
 `repay_date` DATETIME COMMENT '指定还款日期',
 `repay_period` INT(11) COMMENT '放款期数',
 `repay_type` VARCHAR(2) COMMENT '放款类型',
 `first_repay_date` DATETIME COMMENT '起始还款日',
 `last_repay_date` DATETIME COMMENT '最后还款日',
 `loan_usage` VARCHAR(100) COMMENT '借款用途',
 `repay_status` VARCHAR(2) COMMENT '当前还款状态（1：正常，2：提前部分还款，3：提前全部还款，4：逾期，5：代偿结清，6：追偿结清，7：坏账）',
 `next_repay_date` DATETIME COMMENT '下一还款日',
 `total_capital_left` BIGINT  COMMENT '截至当前剩余本金（用于全额提前还款试算）',
 `interest_accu` BIGINT  COMMENT '截至当前累计已还本金金额',
 `service_fee_accu` BIGINT  COMMENT '截至当前服务费用总额',
 `punish_fee_accu` BIGINT  COMMENT '截至当前罚息费用总额',
 `overdue_times` INT(2) COMMENT '逾期次数',
 `max_overdue_day` INT(3) COMMENT '最大逾期天数',
 `curr_overdue_day` INT(2) COMMENT '当前逾期天数',
 `creater` VARCHAR(18) COMMENT '创建人',
 `modifier` VARCHAR(18) COMMENT '修改人',
 `create_time` DATETIME COMMENT '创建时间',
 `modify_time` DATETIME COMMENT '修改时间',
 `route` VARCHAR(1) COMMENT '路由',
 PRIMARY KEY (`id`),
 KEY ams_accounting_01_index_01 (`account_id`),
 KEY ams_accounting_01_index_02 (`cert_type`, `cert_no`),
 KEY ams_accounting_01_index_03 (`mobile`),
 KEY ams_accounting_01_index_04 (`bo_id`),
 KEY ams_accounting_01_index_05 (`merchant_id`),
 KEY ams_accounting_01_index_06 (`product_type`, `product_id`),
 KEY ams_accounting_01_index_07 (`repay_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='账务信息表';

CREATE TABLE `ams_accounting_01` (
 `id` VARCHAR(32) NOT NULL,
 `account_id` VARCHAR(18) COMMENT '借款人账号',
 `user_name` VARCHAR(5) COMMENT '借款人姓名',
 `cert_type` VARCHAR(2) COMMENT '证件类型',
 `cert_no` VARCHAR(32) COMMENT '证件号',
 `mobile` VARCHAR(20) COMMENT '手机号',
 `bo_id` BIGINT  COMMENT '借款编号',
 `merchant_id` BIGINT COMMENT '商户编码',
 `product_id` BIGINT  COMMENT '产品编号',
 `product_type` VARCHAR(2) COMMENT '产品类型',
 `contract_no` VARCHAR(100) COMMENT '合同编号（借据编号）list(可以单个合同，也支持多合同)',
 `contract_type` VARCHAR(2) COMMENT '合同类型（1：单合同/单借据，2：多合同/多借据）',
 `loan_amount` BIGINT  COMMENT '借款金额',
 `contract_amount` BIGINT  COMMENT '合同金额',
 `lend_amount` BIGINT  COMMENT '实际放款金额',
 `capital_amount` BIGINT  COMMENT '本金金额',
 `account_amount` BIGINT  COMMENT '建账金额',
 `repay_rate` VARCHAR(5) COMMENT '原始还款利率',
 `repay_floating_rate` VARCHAR(5) COMMENT '上浮比率（-20% — +20%）',
 `rate_type` VARCHAR(2) COMMENT '利率类型',
 `platform_rate` VARCHAR(2) COMMENT '平台收益率（if channel=1,通过撮合平台需要计算平台收益）',
 `is_full_fee` VARCHAR(2) COMMENT '是否一次性收取平台费（if channel=1）',
 `receipt_rate` VARCHAR(5) COMMENT '收款利率',
 `capital_advance` BIGINT  COMMENT '预收本金',
 `interest_advance` BIGINT  COMMENT '预收利息',
 `repay_account_no` VARCHAR(32) COMMENT '还款绑定账号',
 `repay_account_name` VARCHAR(5) COMMENT '还款账号开户名',
 `repay_acct_bank` VARCHAR(50) COMMENT '还款账号开户行',
 `repay_acct_mobile` VARCHAR(20) COMMENT '还款账号预留手机号',
 `approve_date` DATETIME COMMENT '审批日期',
 `approve_time` DATETIME COMMENT '审批时间',
 `lend_date` DATETIME COMMENT '实际放款日期',
 `lend_time` DATETIME COMMENT '实际放款时间',
 `repay_date` DATETIME COMMENT '指定还款日期',
 `repay_period` INT(11) COMMENT '放款期数',
 `repay_type` VARCHAR(2) COMMENT '放款类型',
 `first_repay_date` DATETIME COMMENT '起始还款日',
 `last_repay_date` DATETIME COMMENT '最后还款日',
 `loan_usage` VARCHAR(100) COMMENT '借款用途',
 `repay_status` VARCHAR(2) COMMENT '当前还款状态（1：正常，2：提前部分还款，3：提前全部还款，4：逾期，5：代偿结清，6：追偿结清，7：坏账）',
 `next_repay_date` DATETIME COMMENT '下一还款日',
 `total_capital_left` BIGINT  COMMENT '截至当前剩余本金（用于全额提前还款试算）',
 `interest_accu` BIGINT  COMMENT '截至当前累计已还本金金额',
 `service_fee_accu` BIGINT  COMMENT '截至当前服务费用总额',
 `punish_fee_accu` BIGINT  COMMENT '截至当前罚息费用总额',
 `overdue_times` INT(2) COMMENT '逾期次数',
 `max_overdue_day` INT(3) COMMENT '最大逾期天数',
 `curr_overdue_day` INT(2) COMMENT '当前逾期天数',
 `creater` VARCHAR(18) COMMENT '创建人',
 `modifier` VARCHAR(18) COMMENT '修改人',
 `create_time` DATETIME COMMENT '创建时间',
 `modify_time` DATETIME COMMENT '修改时间',
 `route` VARCHAR(1) COMMENT '路由',
 PRIMARY KEY (`id`),
 KEY ams_accounting_01_index_01 (`account_id`),
 KEY ams_accounting_01_index_02 (`cert_type`, `cert_no`),
 KEY ams_accounting_01_index_03 (`mobile`),
 KEY ams_accounting_01_index_04 (`bo_id`),
 KEY ams_accounting_01_index_05 (`merchant_id`),
 KEY ams_accounting_01_index_06 (`product_type`, `product_id`),
 KEY ams_accounting_01_index_07 (`repay_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='账务信息表';